# ISSUE: アプリケーションのモジュール化と自動検品システムの導入

## 概要
肥大化した `js/app.js`（約700行）を機能ごとに分割し、メンテナンス性とAIによる編集精度を向上させる。また、複雑化した挙動（カセットの物理演算など）を担保するため、Playwright による自動スモークテストを導入する。

## 課題
- `app.js` が巨大すぎて、AIが編集する際に一部が消失したり重複したりするリスクが高い。
- カセットの物理回転やオートリバースなど、手動での確認が困難なエッジケースが増えている。

## 解決策
1. **ESモジュール化**: `state.js`, `ui.js`, `player.js`, `services.js`, `commands.js` に機能を分離。
2. **自動テストの導入**: Playwright を採用し、核心的なユーザーフローを自動検証する。
3. **localStorage 永続化**: タイトルなどの基本ステートを localStorage に移行。

## 実施内容
- [x] ESモジュールへの解体と再構築
- [x] `@playwright/test` の導入
- [x] `tests/smoke.spec.js` によるメディア切り替え、ラベル編集、モーダルの検証
- [x] `npm test` スクリプトの整備

## ステータス
- **完了** (2025-12-19)
